<?php
/**
 * Maho
 *
 * @category    design
 * @package     default_default
 * @copyright   Copyright (c) 2006-2018 Magento, Inc. (https://magento.com)
 * @copyright   Copyright (c) 2020-2024 The OpenMage Contributors (https://openmage.org)
 * @copyright   Copyright (c) 2024 Maho (https://mahocommerce.com)
 * @license     https://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="noindex, nofollow" />
    <title><?= Mage::helper('adminhtml')->__('Reset a Password') ?></title>
    <link type="text/css" rel="stylesheet" href="<?= $this->getSkinUrl('login.css') ?>" media="all" />
    <link rel="icon" type="image/svg+xml" href="<?= $this->getSkinUrl('images/favicon.svg') ?>" sizes="any">
    <link rel="icon" type="image/png" href="<?= $this->getSkinUrl('images/favicon.png') ?>">
    <script type="text/javascript" src="<?= $this->getJsUrl('prototype/prototype.js') ?>"></script>
    <script type="text/javascript" src="<?= $this->getJsUrl('prototype/validation.js') ?>"></script>
    <script type="text/javascript" src="<?= $this->getJsUrl('mage/adminhtml/form.js') ?>"></script>
</head>
<body id="page-login">
    <div class="login-container">
        <div class="login-box">
            <form method="post" action="<?= $this->getUrl('*/*/resetpasswordpost', ['_query' => ['id' => $userId, 'token' => $resetPasswordLinkToken]]) ?>" id="reset-password-form">
                <fieldset class="login-form">
                    <input name="form_key" type="hidden" value="<?= $this->getFormKey() ?>" />
                    <h2><?= Mage::helper('adminhtml')->__('Reset a Password') ?></h2>
                    <div id="messages">
                        <?= $this->getMessagesBlock()->toHtml() ?>
                    </div>
                    <div class="input-box f-left">
                        <label for="password"><em class="required">*</em> <?= $this->__('New Password') ?></label><br />
                        <!-- This is a dummy hidden field to trick firefox from auto filling the password -->
                        <input type="password" class="input-text no-display" name="dummy" id="dummy" />
                        <input type="password" class="input-text required-entry validate-admin-password min-admin-pass-length-<?= $minAdminPasswordLength ?>" name="password" id="password" autofocus="autofocus" autocomplete="new-password" />
                        <p class="note"><span><?= Mage::helper('adminhtml')->__('Password must be at least of %d characters.', $minAdminPasswordLength) ?></span></p>
                    </div>
                    <div class="input-box f-right">
                        <label for="confirmation"><em class="required">*</em> <?= $this->__('Confirm New Password') ?></label><br />
                        <!-- This is a dummy hidden field to trick firefox from auto filling the password -->
                        <input type="password" class="input-text no-display" name="dummy" id="dummy2" />
                        <input type="password" class="input-text required-entry validate-cpassword" name="confirmation" id="confirmation" autocomplete="new-password" />
                    </div>
                    <div class="clear"></div>
                    <div class="form-buttons">
                        <a class="left" href="<?= $this->getUrl('adminhtml', ['_nosecret' => true]) ?>">&laquo; <?= Mage::helper('adminhtml')->__('Back to Login') ?></a>
                        <input type="submit" class="forgot-password form-button" value="<?= Mage::helper('core')->quoteEscape(Mage::helper('adminhtml')->__('Reset Password')) ?>" />
                    </div>
                </fieldset>
                <p class="legal">Powered by Maho</p>
            </form>
            <div class="bottom"></div>
            <script type="text/javascript">
                var resetPasswordForm = new varienForm('reset-password-form');
            </script>
        </div>
    </div>
</body>
</html>
