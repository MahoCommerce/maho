<?php
/**
 * Maho
 *
 * @package    Mage_Sales
 * @copyright  Copyright (c) 2025-2026 Maho (https://mahocommerce.com)
 * @license    https://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

/** @var Mage_Sales_Model_Order_Pdf_Items_Creditmemo_Grouped $this */
$item = $this->getItem();
?>

<td class="col-products">
    <div class="item-name"><?php echo $this->escapeHtml($this->getItemName()) ?></div>

    <?php if ($children = $this->getChildrenItems()): ?>
    <div class="grouped-children">
        <?php foreach ($children as $child): ?>
        <div class="child-item">
            <?php echo $this->escapeHtml($child->getName()) ?>
            (<?php echo $this->__('Qty') ?>: <?php echo $child->getQtyOrdered() * 1 ?>)
        </div>
        <?php endforeach; ?>
    </div>
    <?php endif; ?>

    <?php if ($options = $this->getItemOptions()): ?>
    <div class="item-options">
        <?php foreach ($options as $option): ?>
        <div class="option">
            <span class="option-label"><?php echo $this->escapeHtml($option['label']) ?>:</span>
            <span class="option-value"><?php echo $this->escapeHtml($option['value']) ?></span>
        </div>
        <?php endforeach; ?>
    </div>
    <?php endif; ?>
</td>

<td class="col-sku text-right">
    <?php echo $this->escapeHtml($this->getSku()) ?>
</td>

<td class="col-price text-right">
    <?php echo $this->formatPrice($this->getItemSubtotal()) ?>
</td>

<td class="col-discount text-right">
    <?php echo $this->formatPrice(-$item->getDiscountAmount()) ?>
</td>

<td class="col-qty text-right">
    <?php echo $this->getItemQty() * 1 ?>
</td>

<td class="col-tax text-right">
    <?php echo $this->formatPrice($this->getItemTax()) ?>
</td>

<td class="col-subtotal text-right">
    <?php echo $this->formatPrice($this->getItemTotalInclTax()) ?>
</td>
