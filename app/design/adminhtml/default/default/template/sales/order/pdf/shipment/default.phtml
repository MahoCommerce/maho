<?php
/**
 * Maho
 *
 * @package    Mage_Sales
 * @copyright  Copyright (c) 2025 Maho (https://mahocommerce.com)
 * @license    https://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

/* @var Mage_Sales_Block_Order_Pdf_Shipment $this */
$shipment = $this->getShipment();
$order = $this->getOrder();
?>

<div class="pdf-page">
    <!-- Logo -->
    <?php if ($logoUrl = $this->getLogoUrl()): ?>
    <div class="pdf-logo">
        <img src="<?php echo $logoUrl ?>" alt="<?php echo $this->escapeHtml($this->getStore()->getName()) ?>" style="max-height: 50pt;" />
    </div>
    <?php endif; ?>

    <!-- Store Address -->
    <?php if ($storeAddress = $this->getStoreAddress()): ?>
    <div class="pdf-store-address">
        <?php echo nl2br($this->escapeHtml($storeAddress)) ?>
    </div>
    <?php endif; ?>

    <!-- Document Header -->
    <div class="pdf-document-header">
        <h1><?php echo $this->__('Shipment # %s', $this->getShipmentNumber()) ?></h1>
        <?php if ($orderNumber = $this->getOrderNumber()): ?>
        <p><?php echo $this->__('Order # %s', $orderNumber) ?></p>
        <?php endif; ?>
        <p><?php echo $this->__('Shipment Date: %s', $this->getShipmentDate()) ?></p>
        <?php if ($orderDate = $this->getOrderDate()): ?>
        <p><?php echo $this->__('Order Date: %s', $orderDate) ?></p>
        <?php endif; ?>
    </div>

    <!-- Addresses -->
    <div class="pdf-addresses">
        <div class="pdf-address-billing">
            <h3><?php echo $this->__('Sold to:') ?></h3>
            <?php if ($billing = $this->getBillingAddress()): ?>
            <address>
                <?php echo $billing->format('html') ?>
            </address>
            <?php endif; ?>
        </div>

        <div class="pdf-address-shipping">
            <h3><?php echo $this->__('Ship to:') ?></h3>
            <?php if ($shipping = $this->getShippingAddress()): ?>
            <address>
                <?php echo $shipping->format('html') ?>
            </address>
            <?php endif; ?>
        </div>
    </div>

    <!-- Shipping Method -->
    <?php if ($shippingMethod = $this->getShippingMethod()): ?>
    <div class="pdf-shipping-method">
        <h3><?php echo $this->__('Shipping Method:') ?></h3>
        <div><?php echo $this->escapeHtml($shippingMethod) ?></div>
    </div>
    <?php endif; ?>

    <!-- Tracking Information -->
    <?php if ($this->hasTracking()): ?>
    <div class="pdf-tracking">
        <h3><?php echo $this->__('Tracking Information:') ?></h3>
        <table>
            <thead>
                <tr>
                    <th><?php echo $this->__('Title') ?></th>
                    <th><?php echo $this->__('Number') ?></th>
                </tr>
            </thead>
            <tbody>
                <?php foreach ($this->getTrackingNumbers() as $track): ?>
                <tr>
                    <td><?php echo $this->escapeHtml($track['carrier']) ?></td>
                    <td><?php echo $this->escapeHtml($track['number']) ?></td>
                </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
    </div>
    <?php endif; ?>

    <!-- Items Table -->
    <div class="pdf-items">
        <table class="pdf-items-table">
            <thead>
                <tr class="pdf-table-header">
                    <th class="col-qty"><?php echo $this->__('Qty') ?></th>
                    <th class="col-products"><?php echo $this->__('Products') ?></th>
                    <th class="col-sku"><?php echo $this->__('SKU') ?></th>
                </tr>
            </thead>
            <tbody>
                <?php foreach ($this->getItems() as $item): ?>
                <tr class="pdf-item-row">
                    <?php echo $this->getItemHtml($item) ?>
                </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
    </div>
</div>
