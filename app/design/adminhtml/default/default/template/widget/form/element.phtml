<?php
/**
 * Maho
 *
 * @package     default_default
 * @copyright   Copyright (c) 2006-2020 Magento, Inc. (https://magento.com)
 * @copyright   Copyright (c) 2021-2025 The OpenMage Contributors (https://openmage.org)
 * @copyright   Copyright (c) 2024-2025 Maho (https://mahocommerce.com)
 * @license     https://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php switch ($element->getType()){
    case 'fieldset': ?>

    <h3><?= $element->getLegend() ?></h3>
    <fieldset>
        <legend><?= $element->getLegend() ?></legend>
        <?php foreach ($element->getElements() as $_element): ?>
            <?= $formBlock->drawElement($_element) ?>
        <?php endforeach ?>
    </fieldset>
      <?php break;
    // no break
    case 'column': ?>
      <?php break;
    case 'hidden': ?>
    <input type="<?= $element->getType() ?>" name="<?= $element->getName() ?>" id="<?= $element->getHtmlId() ?>" value="<?= $element->getValue() ?>">
      <?php break;
    case 'select': ?>
    <span class="form_row">
        <?php if($element->getLabel()): ?><label for="<?= $element->getHtmlId() ?>"><?= $element->getLabel() ?>:</label><?php endif ?>
        <select name="<?= $element->getName() ?>" id="<?= $element->getHtmlId() ?>" class="select<?= $element->getClass() ?>" title="<?= $element->getTitle() ?>">
        <?php foreach ($element->getValues() as $_value): ?>
            <option <?= $_value->serialize() ?><?php if($_value->getValue() == $element->getValue()): ?> selected="selected"<?php endif ?>><?= $_value->getLabel() ?></option>
        <?php endforeach ?>
        </select>
    </span>
      <?php break;
    // no break
    case 'text':
    case 'button':
    case 'password': ?>
    <span class="form_row">
        <?php if($element->getLabel()): ?><label for="<?= $element->getHtmlId() ?>"><?= $element->getLabel() ?>:</label><?php endif ?>
        <input type="<?= $element->getType() ?>" name="<?= $element->getName() ?>" id="<?= $element->getHtmlId() ?>" value="<?= $element->getValue() ?>" class="input-text <?= $element->getClass() ?>" title="<?= $element->getTitle() ?>" <?= ( $element->getOnClick() ? 'onClick="'.$element->getOnClick().'"' : '' ) ?>/>
    </span>
      <?php break;
    // no break
    case 'radio': ?>
    <span class="form_row">
        <?php if($element->getLabel()): ?><label for="<?= $element->getHtmlId() ?>"><?= $element->getLabel() ?>:</label><?php endif ?>
        <input type="<?= $element->getType() ?>" name="<?= $element->getName() ?>" id="<?= $element->getHtmlId() ?>" value="<?= $element->getValue() ?>" class="input-text <?= $element->getClass() ?>" title="<?= $element->getTitle() ?>"/>
    </span>
      <?php break;
    // no break
    case 'hidden': ?>
        <input type="<?= $element->getType() ?>" name="<?= $element->getName() ?>" id="<?= $element->getHtmlId() ?>" value="<?= $element->getValue() ?>">
      <?php break;
    case 'radios': ?>
    <span class="form_row">
        <label for="<?= $element->getHtmlId() ?>"><?= $element->getLabel() ?>:</label>
    <?php foreach($element->getRadios() as $_radio): ?>
    <input type="radio" name="<?= $_radio->getName() ?>" id="<?= $_radio->getHtmlId() ?>" value="<?= $_radio->getValue() ?>" class="input-radio <?= $_radio->getClass() ?>" title="<?= $_radio->getTitle() ?>" <?= ( $_radio->getValue() == $element->getChecked() ) ? 'checked="true"' : '' ?> >&nbsp;<?= $_radio->getLabel() ?>
    <?php endforeach ?>
    </span>
      <?php break;
    // no break
    case 'wysiwyg': ?>
    <span class="form_row">
      <label for="<?= $element->getHtmlId() ?>"><?= $element->getLabel() ?>:</label>
      <textarea name="<?= $element->getName() ?>" title="<?= $element->getTitle() ?>" id="<?= $element->getHtmlId() ?>" class="textarea <?= $element->getClass() ?>" cols="80" rows="20"><?= $element->getValue() ?></textarea>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css">
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.js"></script>
      <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof quillWysiwygSetup !== 'undefined') {
                const config = {
                    enabled: true,
                    hidden: false,
                    use_container: true,
                    add_variables: true,
                    add_widgets: true,
                    add_images: true,
                    files_browser_window_url: '<?= $this->helper('adminhtml')->getUrl('*/cms_wysiwyg_images/index') ?>',
                    widget_window_url: '<?= $this->helper('adminhtml')->getUrl('*/widget/index') ?>',
                    variable_window_url: '<?= $this->helper('adminhtml')->getUrl('*/system_variable/wysiwygPlugin') ?>',
                    store_id: <?= (int)Mage::app()->getStore()->getId() ?>
                };
                window['wysiwyg<?= $element->getHtmlId() ?>'] = new quillWysiwygSetup('<?= $element->getHtmlId() ?>', config);
            }
        });
      </script>
    </span>
      <?php break;
        case 'textarea': ?>
            <span class="form_row">
                    <label for="<?= $element->getHtmlId() ?>"><?= $element->getLabel() ?>:</label>
                    <textarea name="<?= $element->getName() ?>" title="<?= $element->getTitle() ?>" id="<?= $element->getHtmlId() ?>" class="textarea <?= $element->getClass() ?>" cols="15" rows="2"><?= $element->getValue() ?></textarea>
            </span>
      <?php break;
    case 'editor': ?>
      <?php break;
    case 'file': ?>
      <?php break;
    case 'checkbox': ?>
      <?php break;
} ?>
<?php if($element->getScript()): ?>
<script type="text/javascript">
    <?= $element->getScript() ?>
</script>
<?php endif ?>
