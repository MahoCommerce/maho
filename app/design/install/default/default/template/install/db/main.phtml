<?php
/**
 * Maho
 *
 * @package     default_default
 * @copyright   Copyright (c) 2006-2020 Magento, Inc. (https://magento.com)
 * @copyright   Copyright (c) 2021-2024 The OpenMage Contributors (https://openmage.org)
 * @copyright   Copyright (c) 2024-2025 Maho (https://mahocommerce.com)
 * @license     https://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

/**
 * Install database configuration template
 *
 * @see Mage_Install_Block_Config
 * @var Mage_Install_Block_Config $this
 */
?>
<h4 class="section-title"><?= $this->__('Database Connection') ?></h4>
<div class="form-list">
    <ul>
        <?php $dbTypeOptions = $this->getDatabaseBlocks(); ?>
        <?php if (count($dbTypeOptions) > 0): ?>
            <li>
                <label for="db_model_select"><?= $this->__('Database Type') ?></label>
                <select name="config[db_model]" id="db_model_select">
                    <?php foreach($dbTypeOptions as $block): ?>
                        <option value="<?= $block->getIdPrefix()?>" <?php if($this->getFormData()->getDbModel() == $block->getIdPrefix()):?>selected="selected"<?php endif ?>><?= $block->getTitle() ?></option>
                    <?php endforeach ?>
                </select>
            </li>
        <?php endif ?>

        <?php foreach ($dbTypeOptions as $block): ?>
        <?php $block = $this->getDatabaseBlock($block->getIdPrefix()) ?>
            <div id="<?= $block->getIdPrefix() ?>_conn_form" class="db-connection-form <?php if($this->getFormData()->getDbModel() != $block->getIdPrefix()):?>hidden<?php endif ?>" data-db-type="<?= $block->getIdPrefix() ?>">
                <?= $block->toHtml() ?>
            </div>
        <?php endforeach ?>
    </ul>
</div>
