<?php
/**
 * Maho
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2025 Maho (https://mahocommerce.com)
 * @license     https://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

/** @var Maho_Blog_Block_Post_List $this */
$posts = $this->getPosts();
?>

<h1><?= $this->__('Blog') ?></h1>

<div id="blog_posts">
    <?php foreach ($posts->getItems() as $post): ?>
        <a href="<?= Mage::getUrl() . "blog/{$post->getUrlKey()}" ?>.html" class="blog_post_item">
            <?php if ($post->hasImage()): ?>
                <img src="<?= $post->getImageUrl() ?>" alt="<?= $this->escapeHtml($post->getTitle()) ?>" />
            <?php endif ?>
            <strong><?= $post->getTitle() ?></strong>
            <div class="blog_post_date"><?= $this->formatDate($post->getPublishedAt() ?? $post->getCreatedAt()) ?></div>
        </a>
    <?php endforeach ?>
</div>

<style>
    #blog_posts {
        --gap: 1.25rem;
        --min-col: 15.625rem; /* 250px */
        --max-cols: 4;

        display: grid;
        gap: var(--gap);
        grid-template-columns: repeat(auto-fit, minmax(
            clamp(
                var(--min-col),
                (100% - (var(--max-cols) - 1) * var(--gap)) / var(--max-cols),
                100%
            ),
            1fr
        ));
    }

    #blog_posts > .blog_post_item {
        display: block;
        padding: 0.9375rem;
        border-radius: 0.5rem;
        border: 1px solid var(--maho-color-border-light);
        text-decoration: none;
        color: inherit;
        transition: all 0.2s ease;
    }

    #blog_posts > .blog_post_item:hover {
        border-color: var(--maho-color-primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
    }

    .blog_post_item > img {
        width: 100%;
        height: 12.5rem;
        object-fit: cover;
        border-radius: 0.25rem;
        margin-bottom: 0.75rem;
    }
</style>