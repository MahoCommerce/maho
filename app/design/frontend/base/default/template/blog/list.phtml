<?php
/**
 * Maho
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2025-2026 Maho (https://mahocommerce.com)
 * @license     https://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

/** @var Maho_Blog_Block_Post_List $this */
$posts = $this->getPosts();
?>

<?php if ($posts->getSize()): ?>
    <div id="blog_posts">
        <?php foreach ($posts->getItems() as $post): ?>
            <a href="<?= $post->getUrl() ?>" class="blog_post_item">
                <?php if ($post->hasImage()): ?>
                    <img src="<?= $post->getImageUrl() ?>" alt="<?= $this->escapeHtml($post->getTitle()) ?>" />
                <?php endif ?>
                <strong><?= $this->escapeHtml($post->getTitle()) ?></strong>
                <div class="blog_post_date"><?= $this->formatDate($post->getPublishDate() ?? $post->getCreatedAt()) ?></div>
                <?php $excerpt = Mage::helper('blog')->truncateContent($post); ?>
                <?php if ($excerpt): ?>
                    <div class="blog_post_excerpt"><?= $this->escapeHtml($excerpt) ?></div>
                <?php endif ?>
            </a>
        <?php endforeach ?>
    </div>

    <?php if ($posts->getLastPageNumber() > 1): ?>
        <div class="pager">
            <?= $this->getPagerHtml() ?>
        </div>
    <?php endif ?>
<?php else: ?>
    <p class="note-msg"><?= $this->__('There are no blog posts to display.') ?></p>
<?php endif ?>
