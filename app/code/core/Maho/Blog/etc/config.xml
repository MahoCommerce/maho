<?xml version="1.0"?>
<!--
/**
 * Maho
 *
 * @category   Maho
 * @package    Maho_Blog
 * @copyright  Copyright (c) 2025-2026 Maho (https://mahocommerce.com)
 * @license    https://opensource.org/licenses/afl-3.0.php Academic Free License (AFL 3.0)
 */
-->
<config>
    <modules>
        <Maho_Blog>
            <version>1.0.1</version>
        </Maho_Blog>
    </modules>
    <global>
        <models>
            <blog>
                <class>Maho_Blog_Model</class>
                <resourceModel>blog_resource</resourceModel>
            </blog>
            <blog_resource>
                <class>Maho_Blog_Model_Resource</class>
                <entities>
                    <post>
                        <table>blog_post_entity</table>
                    </post>
                    <post_store>
                        <table>blog_post_store</table>
                    </post_store>
                    <eav_attribute>
                        <table>blog_eav_attribute</table>
                    </eav_attribute>
                </entities>
            </blog_resource>
        </models>
        <blocks>
            <blog>
                <class>Maho_Blog_Block</class>
            </blog>
        </blocks>
        <helpers>
            <blog>
                <class>Maho_Blog_Helper</class>
            </blog>
        </helpers>
        <resources>
            <blog_setup>
                <setup>
                    <module>Maho_Blog</module>
                    <class>Mage_Eav_Model_Entity_Setup</class>
                </setup>
            </blog_setup>
        </resources>
        <events>
            <controller_front_init_routers>
                <observers>
                    <blog>
                        <class>Maho_Blog_Controller_Router</class>
                        <method>initControllerRouters</method>
                    </blog>
                </observers>
            </controller_front_init_routers>
            <controller_action_predispatch_blog>
                <observers>
                    <blog_set_entity_key>
                        <class>blog/observer</class>
                        <method>setBlogEntityKey</method>
                    </blog_set_entity_key>
                </observers>
            </controller_action_predispatch_blog>
            <page_block_html_topmenu_gethtml_before>
                <observers>
                    <blog_add_topmenu_items>
                        <class>blog/observer</class>
                        <method>addBlogToTopmenuItems</method>
                    </blog_add_topmenu_items>
                </observers>
            </page_block_html_topmenu_gethtml_before>
            <sitemap_urlset_generating_before>
                <observers>
                    <blog_add_to_sitemap>
                        <class>blog/observer</class>
                        <method>addBlogToSitemap</method>
                    </blog_add_to_sitemap>
                </observers>
            </sitemap_urlset_generating_before>
            <catalogsearch_autocomplete_collect_content>
                <observers>
                    <blog_add_autocomplete_content>
                        <class>blog/observer</class>
                        <method>addBlogAutocompleteContent</method>
                    </blog_add_autocomplete_content>
                </observers>
            </catalogsearch_autocomplete_collect_content>
        </events>
    </global>
    <api>
        <resources>
            <blog_post translate="title" module="blog">
                <title>Blog Posts</title>
                <model>blog/post_api</model>
                <acl>system/api/blog_post</acl>
                <methods>
                    <list translate="title" module="blog">
                        <title>Retrieve blog posts</title>
                        <acl>system/api/blog_post</acl>
                    </list>
                    <info translate="title" module="blog">
                        <title>Retrieve blog post info</title>
                        <acl>system/api/blog_post</acl>
                    </info>
                    <create translate="title" module="blog">
                        <title>Create blog post</title>
                        <acl>system/api/blog_post</acl>
                    </create>
                    <update translate="title" module="blog">
                        <title>Update blog post</title>
                        <acl>system/api/blog_post</acl>
                    </update>
                    <remove translate="title" module="blog">
                        <title>Remove blog post</title>
                        <acl>system/api/blog_post</acl>
                    </remove>
                </methods>
            </blog_post>
        </resources>
        <resources_alias>
            <blog_post>blog_post</blog_post>
        </resources_alias>
        <v2>
            <resources_function_prefix>
                <blog_post>blogPost</blog_post>
            </resources_function_prefix>
        </v2>
    </api>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <blog before="Mage_Adminhtml">Maho_Blog_Adminhtml</blog>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
    <adminhtml>
        <layout>
            <updates>
                <blog>
                    <file>blog.xml</file>
                </blog>
            </updates>
        </layout>
        <translate>
            <modules>
                <Maho_Blog>
                    <files>
                        <default>Maho_Blog.csv</default>
                    </files>
                </Maho_Blog>
            </modules>
        </translate>
    </adminhtml>
    <frontend>
        <routers>
            <blog>
                <use>standard</use>
                <args>
                    <module>Maho_Blog</module>
                    <frontName>blog</frontName>
                </args>
            </blog>
        </routers>
        <layout>
            <updates>
                <blog>
                    <file>blog.xml</file>
                </blog>
            </updates>
        </layout>
        <translate>
            <modules>
                <Maho_Blog>
                    <files>
                        <default>Maho_Blog.csv</default>
                    </files>
                </Maho_Blog>
            </modules>
        </translate>
    </frontend>
    <default>
        <blog>
            <general>
                <show_in_navigation>1</show_in_navigation>
                <url_prefix>blog</url_prefix>
                <posts_per_page>20</posts_per_page>
            </general>
            <search>
                <enable_autosuggest>1</enable_autosuggest>
                <autosuggest_limit>3</autosuggest_limit>
            </search>
            <sitemap>
                <changefreq>weekly</changefreq>
                <priority>0.8</priority>
                <lastmod>1</lastmod>
                <include_images>1</include_images>
            </sitemap>
        </blog>
    </default>
</config>
